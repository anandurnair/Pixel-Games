<%- include('./includes/adminHeader.ejs'); -%>

<div id="page-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-8">
        <h1 class="page-header">Order Management</h1>
      </div>

      <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">Order List</div>
          <!-- /.panel-heading -->
          <div class="panel-body">
            <!-- Pagination links -->
            <div class="pagination">
              <% if (currentPage > 1) { %>
              <a href="?page=<%= currentPage - 1 %>">Previous</a>
              <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
              <a href="?page=<%= i %>"><%= i %></a>
              <% } %> <% if (currentPage < totalPages) { %>
              <a href="?page=<%= currentPage + 1 %>">Next</a>
              <% } %>
            </div>
            <div class="table-responsive">
              <table
                class="table table-striped table-bordered table-hover"
                id="dataTables-example"
              >
                <thead>
                  <tr>
                    <th>Game Name</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Price</th>

                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  <% orders.forEach(order => { %> <% const items =
                  order.gameItems; %> <% const user = order.userId; %>

                  <% if (user && user.fullName) { %>

                  <% } else { %>
                  <td colspan="6">User information not available</td>
                  <% } %>

                  <% items.forEach(item => { %>
                  <tr class="odd gradeX">
                    <td><%= item.gameId.gameName %></td>
                    <td><%= user.fullName %></td>
                    <td><%= item.orderDate %></td>
                    <td>â‚¹<%= item.gameId.price %></td>

                    <td><%= item.orderStatus %></td>
                  </tr>
                  <% }); %> <% }); %>
                </tbody>
              </table>
            </div>
            
          </div>
         
        </div>
      
      </div>
      <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->

    <!-- /.row -->
  </div>
</div>
